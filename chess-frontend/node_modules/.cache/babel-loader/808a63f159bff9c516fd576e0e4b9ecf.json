{"ast":null,"code":"var _jsxFileName = \"/home/tarzan/Projects/MinumChess/chess-frontend/src/components/Board/board.js\";\nimport React from 'react';\nimport Row from './Row/row';\nimport './styles/board.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default class Board extends React.Component {\n  constructor() {\n    super();\n    this.height = window.screen.height - 75;\n    this.state = {\n      board: {\n        boardId: 0,\n        fenNotation: \"\",\n        whiteId: null,\n        blackId: null,\n        turn: 0\n      },\n      yourPiece: null,\n      thierPiece: null\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleThierPiece = this.handleThierPiece.bind(this);\n    this.handleYourPiece = this.handleYourPiece.bind(this);\n    this.getThierPiece = this.getThierPiece.bind(this);\n    this.getYourPiece = this.getYourPiece.bind(this);\n    this.getBoard = this.getBoard.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.getUserId() !== 0) {\n      this.interval = setInterval(() => {\n        fetch(\"http://localhost:5000/ChessAPI/getBoard/\" + this.props.getUserId(), {\n          method: 'GET',\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        }).then(res => {\n          if (res.status === 418) {\n            console.log(\"Game over\");\n          } else {\n            console.log(\"not over\");\n          }\n\n          return res.json();\n        }).then(result => {\n          this.setState({\n            board: result\n          });\n        }, error => {\n          console.log(\"error in fetching board\");\n        });\n      }, 2000);\n    }\n  }\n\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n\n  handleYourPiece(piece) {\n    this.setState({\n      yourPiece: piece\n    });\n  }\n\n  handleThierPiece(piece) {\n    this.setState({\n      thierPiece: piece\n    });\n  }\n\n  getYourPiece() {\n    return this.state.yourPiece;\n  }\n\n  getThierPiece() {\n    return this.state.thierPiece;\n  }\n\n  getBoard() {\n    return this.state.board;\n  }\n\n  handleSubmit() {\n    console.log(\"Your piece: \" + this.state.yourPiece.row);\n    console.log(\"Thier Piece: \" + this.state.thierPiece.row);\n    const requestOptions = {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify({\n        userId: this.props.getUserId(),\n        yourRow: this.state.yourPiece.row,\n        yourCol: this.state.yourPiece.col,\n        thierRow: this.state.thierPiece.row,\n        thierCol: this.state.thierPiece.col\n      })\n    };\n    this.setState({\n      yourPiece: null\n    });\n    this.setState({\n      thierPiece: null\n    });\n    fetch('http://localhost:5000/ChessAPI/chessMove', requestOptions) //.then(response => response.json())\n    .then(data => this.setState({\n      Board: data\n    }));\n  }\n\n  render() {\n    class tile {}\n\n    let isBlack = this.props.getUserId() === this.state.board.blackId;\n    let chessboard = [];\n    let board = this.state.board.fenNotation.split(\" \")[0];\n    board = board.split(\"/\");\n    let index = 0;\n    board.forEach(r => {\n      let prerow = r.split(\"\");\n      let row = [];\n      let i = 0;\n      prerow.forEach(elem => {\n        if (isNaN(elem)) {\n          row[i++] = {\n            type: elem,\n            col: i - 1,\n            row: index\n          };\n        } else {\n          let element = parseInt(elem);\n\n          for (let x = 0; x < element; x++) {\n            row[i++] = {\n              type: 0,\n              col: i - 1,\n              row: index\n            };\n          }\n        }\n      });\n      chessboard[index++] = row;\n    });\n    /*\n    if (isBlack && this.state.board.boardId !== 0) {\n      let row = 0;\n      let col = 0;\n      for (let i = 7; i >= 0; i--) {\n        for (let j = 7; i >= 0; j--) {\n          let tempType = chessboard[row][col].type;\n          chessboard[row][col].type = chessboard[i][j].type;\n          chessboard[i][j].type = tempType;\n          col++;\n        }\n        row++;\n      }\n    }*/\n\n    if (this.state.boardId !== 0) console.log(chessboard[0][0]['type']);\n    chessboard = chessboard.map(row => /*#__PURE__*/_jsxDEV(Row, {\n      row: row,\n      userId: this.props.getUserId(),\n      getBoard: this.getBoard,\n      setYours: this.handleYourPiece,\n      setThiers: this.handleThierPiece,\n      getYours: this.getYourPiece,\n      getThiers: this.getThierPiece\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 42\n    }, this));\n    let playerTurn = this.state.board.turn % 2 === 0 ? /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"center\",\n      children: \"White's turn to move.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 58\n    }, this) : /*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"center\",\n      children: \"Black's turn to move.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 110\n    }, this);\n    return /*#__PURE__*/_jsxDEV(React.Fragment, {\n      children: [playerTurn, /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"center\",\n        children: chessboard\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }, this);\n  }\n\n}","map":{"version":3,"sources":["/home/tarzan/Projects/MinumChess/chess-frontend/src/components/Board/board.js"],"names":["React","Row","Board","Component","constructor","height","window","screen","state","board","boardId","fenNotation","whiteId","blackId","turn","yourPiece","thierPiece","componentDidMount","bind","handleSubmit","handleThierPiece","handleYourPiece","getThierPiece","getYourPiece","getBoard","props","getUserId","interval","setInterval","fetch","method","headers","then","res","status","console","log","json","result","setState","error","componentWillUnmount","clearInterval","piece","row","requestOptions","body","JSON","stringify","userId","yourRow","yourCol","col","thierRow","thierCol","data","render","tile","isBlack","chessboard","split","index","forEach","r","prerow","i","elem","isNaN","type","element","parseInt","x","map","playerTurn"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAO,oBAAP;;AACA,eAAe,MAAMC,KAAN,SAAoBF,KAAK,CAACG,SAA1B,CAAoC;AAEjDC,EAAAA,WAAW,GAAG;AACZ;AADY,SADdC,MACc,GADLC,MAAM,CAACC,MAAP,CAAcF,MAAd,GAAuB,EAClB;AAEZ,SAAKG,KAAL,GAAa;AACXC,MAAAA,KAAK,EAAE;AACLC,QAAAA,OAAO,EAAE,CADJ;AAELC,QAAAA,WAAW,EAAE,EAFR;AAGLC,QAAAA,OAAO,EAAE,IAHJ;AAILC,QAAAA,OAAO,EAAE,IAJJ;AAKLC,QAAAA,IAAI,EAAE;AALD,OADI;AAQXC,MAAAA,SAAS,EAAE,IARA;AASXC,MAAAA,UAAU,EAAE;AATD,KAAb;AAWA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AACA,SAAKC,YAAL,GAAoB,KAAKA,YAAL,CAAkBD,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKE,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBF,IAAtB,CAA2B,IAA3B,CAAxB;AACA,SAAKG,eAAL,GAAuB,KAAKA,eAAL,CAAqBH,IAArB,CAA0B,IAA1B,CAAvB;AACA,SAAKI,aAAL,GAAqB,KAAKA,aAAL,CAAmBJ,IAAnB,CAAwB,IAAxB,CAArB;AACA,SAAKK,YAAL,GAAoB,KAAKA,YAAL,CAAkBL,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKM,QAAL,GAAgB,KAAKA,QAAL,CAAcN,IAAd,CAAmB,IAAnB,CAAhB;AACD;;AAEDD,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKQ,KAAL,CAAWC,SAAX,OAA2B,CAA/B,EAAkC;AAChC,WAAKC,QAAL,GAAgBC,WAAW,CAAC,MAAM;AAChCC,QAAAA,KAAK,CAAC,6CAA6C,KAAKJ,KAAL,CAAWC,SAAX,EAA9C,EAAsE;AACzEI,UAAAA,MAAM,EAAE,KADiE;AAEzEC,UAAAA,OAAO,EAAE;AACP,4BAAgB;AADT;AAFgE,SAAtE,CAAL,CAMGC,IANH,CAMQC,GAAG,IAAI;AACX,cAAIA,GAAG,CAACC,MAAJ,KAAe,GAAnB,EAAwB;AACtBC,YAAAA,OAAO,CAACC,GAAR,CAAY,WAAZ;AACD,WAFD,MAGK;AACHD,YAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACD;;AACD,iBAAOH,GAAG,CAACI,IAAJ,EAAP;AACD,SAdH,EAeGL,IAfH,CAgBKM,MAAD,IAAY;AACV,eAAKC,QAAL,CAAc;AAAE9B,YAAAA,KAAK,EAAE6B;AAAT,WAAd;AACD,SAlBL,EAmBKE,KAAD,IAAW;AACTL,UAAAA,OAAO,CAACC,GAAR,CAAY,yBAAZ;AACD,SArBL;AAuBD,OAxB0B,EAwBxB,IAxBwB,CAA3B;AA0BD;AACF;;AACDK,EAAAA,oBAAoB,GAAG;AACrBC,IAAAA,aAAa,CAAC,KAAKf,QAAN,CAAb;AACD;;AACDN,EAAAA,eAAe,CAACsB,KAAD,EAAQ;AACrB,SAAKJ,QAAL,CAAc;AAAExB,MAAAA,SAAS,EAAE4B;AAAb,KAAd;AACD;;AACDvB,EAAAA,gBAAgB,CAACuB,KAAD,EAAQ;AACtB,SAAKJ,QAAL,CAAc;AAAEvB,MAAAA,UAAU,EAAE2B;AAAd,KAAd;AACD;;AACDpB,EAAAA,YAAY,GAAG;AACb,WAAO,KAAKf,KAAL,CAAWO,SAAlB;AACD;;AACDO,EAAAA,aAAa,GAAG;AACd,WAAO,KAAKd,KAAL,CAAWQ,UAAlB;AACD;;AACDQ,EAAAA,QAAQ,GAAG;AACT,WAAO,KAAKhB,KAAL,CAAWC,KAAlB;AACD;;AACDU,EAAAA,YAAY,GAAG;AACbgB,IAAAA,OAAO,CAACC,GAAR,CAAY,iBAAiB,KAAK5B,KAAL,CAAWO,SAAX,CAAqB6B,GAAlD;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAY,kBAAkB,KAAK5B,KAAL,CAAWQ,UAAX,CAAsB4B,GAApD;AACA,UAAMC,cAAc,GAAG;AACrBf,MAAAA,MAAM,EAAE,MADa;AAErBC,MAAAA,OAAO,EAAE;AAAE,wBAAgB;AAAlB,OAFY;AAGrBe,MAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnBC,QAAAA,MAAM,EAAE,KAAKxB,KAAL,CAAWC,SAAX,EADW;AAEnBwB,QAAAA,OAAO,EAAE,KAAK1C,KAAL,CAAWO,SAAX,CAAqB6B,GAFX;AAGnBO,QAAAA,OAAO,EAAE,KAAK3C,KAAL,CAAWO,SAAX,CAAqBqC,GAHX;AAInBC,QAAAA,QAAQ,EAAE,KAAK7C,KAAL,CAAWQ,UAAX,CAAsB4B,GAJb;AAKnBU,QAAAA,QAAQ,EAAE,KAAK9C,KAAL,CAAWQ,UAAX,CAAsBoC;AALb,OAAf;AAHe,KAAvB;AAWA,SAAKb,QAAL,CAAc;AAAExB,MAAAA,SAAS,EAAE;AAAb,KAAd;AACA,SAAKwB,QAAL,CAAc;AAAEvB,MAAAA,UAAU,EAAE;AAAd,KAAd;AACAa,IAAAA,KAAK,CAAC,0CAAD,EAA6CgB,cAA7C,CAAL,CACE;AADF,KAEGb,IAFH,CAEQuB,IAAI,IAAI,KAAKhB,QAAL,CAAc;AAAErC,MAAAA,KAAK,EAAEqD;AAAT,KAAd,CAFhB;AAGD;;AAEDC,EAAAA,MAAM,GAAG;AACP,UAAMC,IAAN,CAAU;;AAGV,QAAIC,OAAO,GAAG,KAAKjC,KAAL,CAAWC,SAAX,OAA2B,KAAKlB,KAAL,CAAWC,KAAX,CAAiBI,OAA1D;AAEA,QAAI8C,UAAU,GAAG,EAAjB;AACA,QAAIlD,KAAK,GAAG,KAAKD,KAAL,CAAWC,KAAX,CAAiBE,WAAjB,CAA6BiD,KAA7B,CAAmC,GAAnC,EAAwC,CAAxC,CAAZ;AACAnD,IAAAA,KAAK,GAAGA,KAAK,CAACmD,KAAN,CAAY,GAAZ,CAAR;AACA,QAAIC,KAAK,GAAG,CAAZ;AACApD,IAAAA,KAAK,CAACqD,OAAN,CAAeC,CAAD,IAAO;AACnB,UAAIC,MAAM,GAAGD,CAAC,CAACH,KAAF,CAAQ,EAAR,CAAb;AACA,UAAIhB,GAAG,GAAG,EAAV;AACA,UAAIqB,CAAC,GAAG,CAAR;AACAD,MAAAA,MAAM,CAACF,OAAP,CAAgBI,IAAD,IAAU;AACvB,YAAIC,KAAK,CAACD,IAAD,CAAT,EAAiB;AACftB,UAAAA,GAAG,CAACqB,CAAC,EAAF,CAAH,GAAW;AAAEG,YAAAA,IAAI,EAAEF,IAAR;AAAcd,YAAAA,GAAG,EAAEa,CAAC,GAAG,CAAvB;AAA0BrB,YAAAA,GAAG,EAAEiB;AAA/B,WAAX;AACD,SAFD,MAGK;AACH,cAAIQ,OAAO,GAAGC,QAAQ,CAACJ,IAAD,CAAtB;;AACA,eAAK,IAAIK,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGF,OAApB,EAA6BE,CAAC,EAA9B,EAAkC;AAChC3B,YAAAA,GAAG,CAACqB,CAAC,EAAF,CAAH,GAAW;AAAEG,cAAAA,IAAI,EAAE,CAAR;AAAWhB,cAAAA,GAAG,EAAEa,CAAC,GAAG,CAApB;AAAuBrB,cAAAA,GAAG,EAAEiB;AAA5B,aAAX;AACD;AACF;AACF,OAVD;AAWAF,MAAAA,UAAU,CAACE,KAAK,EAAN,CAAV,GAAsBjB,GAAtB;AACD,KAhBD;AAiBA;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACI,QAAG,KAAKpC,KAAL,CAAWE,OAAX,KAAuB,CAA1B,EAA4ByB,OAAO,CAACC,GAAR,CAAYuB,UAAU,CAAC,CAAD,CAAV,CAAc,CAAd,EAAiB,MAAjB,CAAZ;AAE5BA,IAAAA,UAAU,GAAGA,UAAU,CAACa,GAAX,CAAgB5B,GAAD,iBAAS,QAAC,GAAD;AAAK,MAAA,GAAG,EAAEA,GAAV;AAAe,MAAA,MAAM,EAAE,KAAKnB,KAAL,CAAWC,SAAX,EAAvB;AAA+C,MAAA,QAAQ,EAAE,KAAKF,QAA9D;AAAwE,MAAA,QAAQ,EAAE,KAAKH,eAAvF;AAAwG,MAAA,SAAS,EAAE,KAAKD,gBAAxH;AAA0I,MAAA,QAAQ,EAAE,KAAKG,YAAzJ;AAAuK,MAAA,SAAS,EAAE,KAAKD;AAAvL;AAAA;AAAA;AAAA;AAAA,YAAxB,CAAb;AAEA,QAAImD,UAAU,GAAI,KAAKjE,KAAL,CAAWC,KAAX,CAAiBK,IAAjB,GAAwB,CAAxB,KAA8B,CAA/B,gBAAoC;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAApC,gBAAwF;AAAI,MAAA,SAAS,EAAC,QAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAzG;AACA,wBAAQ,QAAC,KAAD,CAAO,QAAP;AAAA,iBACL2D,UADK,eAEN;AAAK,QAAA,SAAS,EAAC,QAAf;AAAA,kBAAyBd;AAAzB;AAAA;AAAA;AAAA;AAAA,cAFM;AAAA;AAAA;AAAA;AAAA;AAAA,YAAR;AAID;;AA/IgD","sourcesContent":["import React from 'react'\nimport Row from './Row/row';\nimport './styles/board.css'\nexport default class Board extends React.Component {\n  height = window.screen.height - 75\n  constructor() {\n    super();\n    this.state = {\n      board: {\n        boardId: 0,\n        fenNotation: \"\",\n        whiteId: null,\n        blackId: null,\n        turn: 0\n      },\n      yourPiece: null,\n      thierPiece: null,\n    }\n    this.componentDidMount = this.componentDidMount.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n    this.handleThierPiece = this.handleThierPiece.bind(this);\n    this.handleYourPiece = this.handleYourPiece.bind(this);\n    this.getThierPiece = this.getThierPiece.bind(this);\n    this.getYourPiece = this.getYourPiece.bind(this);\n    this.getBoard = this.getBoard.bind(this);\n  }\n\n  componentDidMount() {\n    if (this.props.getUserId() !== 0) {\n      this.interval = setInterval(() => {\n        fetch(\"http://localhost:5000/ChessAPI/getBoard/\" + this.props.getUserId(), {\n          method: 'GET',\n          headers: {\n            \"Content-type\": \"application/json\"\n          }\n        })\n          .then(res => {\n            if (res.status === 418) {\n              console.log(\"Game over\")\n            }\n            else {\n              console.log(\"not over\")\n            }\n            return res.json()\n          })\n          .then(\n            (result) => {\n              this.setState({ board: result });\n            },\n            (error) => {\n              console.log(\"error in fetching board\");\n            }\n          )\n      }, 2000);\n\n    }\n  }\n  componentWillUnmount() {\n    clearInterval(this.interval);\n  }\n  handleYourPiece(piece) {\n    this.setState({ yourPiece: piece });\n  }\n  handleThierPiece(piece) {\n    this.setState({ thierPiece: piece });\n  }\n  getYourPiece() {\n    return this.state.yourPiece;\n  }\n  getThierPiece() {\n    return this.state.thierPiece;\n  }\n  getBoard() {\n    return this.state.board;\n  }\n  handleSubmit() {\n    console.log(\"Your piece: \" + this.state.yourPiece.row);\n    console.log(\"Thier Piece: \" + this.state.thierPiece.row);\n    const requestOptions = {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({\n        userId: this.props.getUserId(),\n        yourRow: this.state.yourPiece.row,\n        yourCol: this.state.yourPiece.col,\n        thierRow: this.state.thierPiece.row,\n        thierCol: this.state.thierPiece.col\n      })\n    };\n    this.setState({ yourPiece: null });\n    this.setState({ thierPiece: null });\n    fetch('http://localhost:5000/ChessAPI/chessMove', requestOptions)\n      //.then(response => response.json())\n      .then(data => this.setState({ Board: data }));\n  }\n\n  render() {\n    class tile{\n      \n    }\n    let isBlack = this.props.getUserId() === this.state.board.blackId;\n\n    let chessboard = []\n    let board = this.state.board.fenNotation.split(\" \")[0];\n    board = board.split(\"/\");\n    let index = 0;\n    board.forEach((r) => {\n      let prerow = r.split(\"\");\n      let row = []\n      let i = 0;\n      prerow.forEach((elem) => {\n        if (isNaN(elem)) {\n          row[i++] = { type: elem, col: i - 1, row: index };\n        }\n        else {\n          let element = parseInt(elem);\n          for (let x = 0; x < element; x++) {\n            row[i++] = { type: 0, col: i - 1, row: index };\n          }\n        }\n      })\n      chessboard[index++] = row;\n    })\n    /*\n    if (isBlack && this.state.board.boardId !== 0) {\n      let row = 0;\n      let col = 0;\n      for (let i = 7; i >= 0; i--) {\n        for (let j = 7; i >= 0; j--) {\n          let tempType = chessboard[row][col].type;\n          chessboard[row][col].type = chessboard[i][j].type;\n          chessboard[i][j].type = tempType;\n          col++;\n        }\n        row++;\n      }\n    }*/\n    if(this.state.boardId !== 0)console.log(chessboard[0][0]['type'])\n\n    chessboard = chessboard.map((row) => <Row row={row} userId={this.props.getUserId()} getBoard={this.getBoard} setYours={this.handleYourPiece} setThiers={this.handleThierPiece} getYours={this.getYourPiece} getThiers={this.getThierPiece} />);\n\n    let playerTurn = (this.state.board.turn % 2 === 0) ? <h2 className=\"center\">White's turn to move.</h2> : <h2 className=\"center\">Black's turn to move.</h2>\n    return (<React.Fragment>\n      {playerTurn}\n      <div className=\"center\">{chessboard}</div>\n    </React.Fragment >);\n  }\n}\n"]},"metadata":{},"sourceType":"module"}